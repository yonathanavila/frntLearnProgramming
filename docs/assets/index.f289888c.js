import{d as C,c as b,t as V,o as g,r as f,a as P,g as E,b as D,n as B,e as c,f as i,w as p,F as I,h as F,i as S,j as m,k,E as W,T as G,p as L,l as T,s as R,D as X,m as Y,q as j,u as K,I as A,v as J,x as Q}from"./vendor.7f79e0ec.js";const Z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(t){if(t.ep)return;t.ep=!0;const l=r(t);fetch(t.href,l)}};Z();var N=(o,e)=>{for(const[r,n]of e)o[r]=n;return o};const ee=C({props:["title"]}),oe={class:"header"};function te(o,e,r,n,t,l){return g(),b("div",oe,V(o.title),1)}var O=N(ee,[["render",te],["__scopeId","data-v-7b0e27ed"]]);const ne=C({components:{nodeHeader:O},setup(){const o=f(null),e=f(0);let r=null;const n=f(""),t=f("get"),l=f({}),s=P([{value:"get",label:"GET"},{value:"post",label:"POST"}]);r=E().appContext.config.globalProperties.$df.value;const w=_=>{l.value.data.method=_,r.updateNodeDataFromId(e.value,l.value)};return D(async()=>{await B(),e.value=o.value.parentElement.parentElement.id.slice(5),l.value=r.getNodeFromId(e.value),n.value=l.value.data.url,t.value=l.value.data.method}),{el:o,url:n,method:t,options:s,updateSelect:w}}}),le={ref:"el"},ae=m("br",null,null,-1),re=m("br",null,null,-1),de=k("https://");function se(o,e,r,n,t,l){const s=c("nodeHeader"),w=c("el-option"),_=c("el-select"),v=c("el-input");return g(),b("div",le,[i(s,{title:"Get/Post"}),i(_,{modelValue:o.method,"onUpdate:modelValue":e[0]||(e[0]=d=>o.method=d),placeholder:"Select",onChange:o.updateSelect,size:"small","df-method":""},{default:p(()=>[(g(!0),b(I,null,F(o.options,d=>(g(),S(w,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),ae,re,i(v,{modelValue:o.url,"onUpdate:modelValue":e[1]||(e[1]=d=>o.url=d),"df-url":"",placeholder:"Please input",size:"small"},{prepend:p(()=>[de]),_:1},8,["modelValue"])],512)}var ie=N(ne,[["render",se]]);const ue=C({components:{nodeHeader:O},setup(){const o=f(null),e=f("");let r=null;const n=f(0),t=f({}),l=f(!1),s=f("rtl"),w=v=>{W.confirm("Are you sure you want to close this?").then(()=>{v()}).catch(()=>{})};r=E().appContext.config.globalProperties.$df.value;const _=v=>{t.value.data.script=v,r.updateNodeDataFromId(n.value,t.value)};return D(async()=>{await B(),n.value=o.value.parentElement.parentElement.id.slice(5),t.value=r.getNodeFromId(n.value),e.value=t.value.data.script}),{el:o,drawer:l,direction:s,handleClose:w,textarea:e,updateSelect:_}}}),U=o=>(L("data-v-f7be97b0"),o=o(),T(),o),ce={ref:"el"},pe=U(()=>m("p",null,"Open in navbar",-1)),fe=k("Edit"),we=U(()=>m("p",null,"Autosave",-1));function _e(o,e,r,n,t,l){const s=c("nodeHeader"),w=c("el-button"),_=c("el-input"),v=c("el-drawer");return g(),b("div",ce,[i(s,{title:"Script"}),pe,i(w,{type:"info",size:"small",onClick:e[0]||(e[0]=d=>o.drawer=!0)},{default:p(()=>[fe]),_:1}),(g(),S(G,{to:"body"},[i(v,{modelValue:o.drawer,"onUpdate:modelValue":e[2]||(e[2]=d=>o.drawer=d),title:"Edit Optinos",direction:o.direction,"before-close":o.handleClose},{default:p(()=>[we,i(_,{modelValue:o.textarea,"onUpdate:modelValue":e[1]||(e[1]=d=>o.textarea=d),rows:8,"df-script":"",onChange:o.updateSelect,type:"textarea",placeholder:"Please input"},null,8,["modelValue","onChange"])]),_:1},8,["modelValue","direction","before-close"])]))],512)}var me=N(ue,[["render",_e],["__scopeId","data-v-f7be97b0"]]);const ve={};function he(o,e){return g(),b("p",null,"console.log")}var ge=N(ve,[["render",he]]);const be={name:"drawflow",setup(){const o=P([{name:"Get/Post",color:"#49494970",item:"Node1",input:0,output:1},{name:"Script",color:"blue",item:"Node2",input:1,output:2},{name:"console.log",color:"#ff9900",item:"Node3",input:1,output:0}]),e=R({}),r=f(!1),n=f({}),t={version:3,h:Y,render:j},l=E();l.appContext.app._context.config.globalProperties.$df=e;function s(){n.value=e.value.export(),r.value=!0}const w=a=>{a.type==="touchstart"?d=a.target.closest(".drag-drawflow").getAttribute("data-node"):a.dataTransfer.setData("node",a.target.getAttribute("data-node"))},_=a=>{if(a.type==="touchend"){var h=document.elementFromPoint(x.touches[0].clientX,x.touches[0].clientY).closest("#drawflow");h!=null&&$(d,x.touches[0].clientX,x.touches[0].clientY),d=""}else{a.preventDefault();var y=a.dataTransfer.getData("node");$(y,a.clientX,a.clientY)}},v=a=>{a.preventDefault()};let d="",x=null;function u(a){x=a}function $(a,h,y){h=h*(e.value.precanvas.clientWidth/(e.value.precanvas.clientWidth*e.value.zoom))-e.value.precanvas.getBoundingClientRect().x*(e.value.precanvas.clientWidth/(e.value.precanvas.clientWidth*e.value.zoom)),y=y*(e.value.precanvas.clientHeight/(e.value.precanvas.clientHeight*e.value.zoom))-e.value.precanvas.getBoundingClientRect().y*(e.value.precanvas.clientHeight/(e.value.precanvas.clientHeight*e.value.zoom));const H=o.find(M=>M.item==a);e.value.addNode(a,H.input,H.output,h,y,a,{},a,"vue")}return D(()=>{for(var a=document.getElementsByClassName("drag-drawflow"),h=0;h<a.length;h++)a[h].addEventListener("touchend",_,!1),a[h].addEventListener("touchmove",u,!1),a[h].addEventListener("touchstart",w,!1);const y=document.getElementById("drawflow");e.value=new X(y,t,l.appContext.app._context),e.value.start(),e.value.registerNode("Node1",ie,{},{}),e.value.registerNode("Node2",me,{},{}),e.value.registerNode("Node3",ge,{},{}),e.value.import({drawflow:{Home:{data:{"5":{id:5,name:"Node2",data:{script:`(req,res) => {
 console.log(req);
}`},class:"Node2",html:"Node2",typenode:"vue",inputs:{input_1:{connections:[{node:"6",input:"output_1"}]}},outputs:{output_1:{connections:[]},output_2:{connections:[]}},pos_x:1e3,pos_y:117},"6":{id:6,name:"Node1",data:{url:"localhost/add",method:"post"},class:"Node1",html:"Node1",typenode:"vue",inputs:{},outputs:{output_1:{connections:[{node:"5",output:"input_1"}]}},pos_x:137,pos_y:89}}}}})}),{exportEditor:s,listNodes:o,drag:w,drop:_,allowDrop:v,dialogVisible:r,dialogData:n}}},q=o=>(L("data-v-67a924d2"),o=o(),T(),o),xe=q(()=>m("h3",null,"Drawflow Example vue3",-1)),ye=k("Export"),ke=["data-node"],Ne=q(()=>m("span",null,"Data:",-1)),$e={class:"dialog-footer"},Ce=k("Cancel"),Ve=k("Confirm");function Ee(o,e,r,n,t,l){const s=c("el-button"),w=c("el-header"),_=c("el-aside"),v=c("el-main"),d=c("el-container"),x=c("el-dialog");return g(),b(I,null,[i(d,null,{default:p(()=>[i(w,{class:"header"},{default:p(()=>[xe,i(s,{type:"primary",onClick:n.exportEditor},{default:p(()=>[ye]),_:1},8,["onClick"])]),_:1}),i(d,{class:"container"},{default:p(()=>[i(_,{width:"250px",class:"column"},{default:p(()=>[m("ul",null,[(g(!0),b(I,null,F(n.listNodes,u=>(g(),b("li",{key:u,draggable:"true","data-node":u.item,onDragstart:e[0]||(e[0]=$=>n.drag($)),class:"drag-drawflow"},[m("div",{class:"node",style:K(`background: ${u.color}`)},V(u.name),5)],40,ke))),128))])]),_:1}),i(v,null,{default:p(()=>[m("div",{id:"drawflow",onDrop:e[1]||(e[1]=u=>n.drop(u)),onDragover:e[2]||(e[2]=u=>n.allowDrop(u))},null,32)]),_:1})]),_:1})]),_:1}),i(x,{modelValue:n.dialogVisible,"onUpdate:modelValue":e[5]||(e[5]=u=>n.dialogVisible=u),title:"Export",width:"50%"},{footer:p(()=>[m("span",$e,[i(s,{onClick:e[3]||(e[3]=u=>n.dialogVisible=!1)},{default:p(()=>[Ce]),_:1}),i(s,{type:"primary",onClick:e[4]||(e[4]=u=>n.dialogVisible=!1)},{default:p(()=>[Ve]),_:1})])]),default:p(()=>[Ne,m("pre",null,[m("code",null,V(n.dialogData),1)])]),_:1},8,["modelValue"])],64)}var De=N(be,[["render",Ee],["__scopeId","data-v-67a924d2"]]);const Ie={setup(o){return(e,r)=>(g(),S(De))}};console.log(A);const z=J(Ie);z.use(Q);z.use(A);z.mount("#app");
